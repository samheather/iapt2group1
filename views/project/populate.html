<!--
	This page is used to populate a new project with fields for transcribed data and
	images that need to be transcribed.
-->

<!-- Show in the project template -->
{{extend 'tx-layout.html'}}

    <div class="section">
        <h1>Create Collection: {{=project.title}}</h1>

        <p>Description: {{=project.requestDescription}}</p>

    	<div class="row">
<<<<<<< HEAD
			<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
				<div class="project-section">
                    <h2>Fields</h2>

                    {{if len(project.customFields()) >0: }}
                    <table class="table table-striped">
                        <tr>
                            <th>Field Name</th>
                            <th>Field Type</th>
                            <th></th>
                        </tr>
                        {{for field in project.customFields():}}
                        <tr>
                            <td>{{=field.ProjectField.label}}</td>
                            <td>{{=field.TranscriptionFieldType.friendlyName}}</td>
                            <td class="table-button-column"><a class="btn btn-primary" href="{{=URL('project', 'deleteField', args=[project.id, field.ProjectField.id])}}">Delete</a></td>
                        </tr>
                        {{pass}}
                    </table>
                    {{else:}}
                    <p>This project has no fields.</p>
                    {{pass}}
                    <a class="btn btn-primary" href="{{=URL('project', 'addField', args=project.id)}}">Add Field</a>
                </div>


                <div class="project-section">

				<h2>Records</h2>

                {{if len(project.images()) >0: }}
=======
    		<!-- Project title and description -->
    		<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
				<h2>Create Project: {{=project.title}} - Page 2 of 2</h2>
				<p>Description: {{=project.requestDescription}}</p>
			</div>
			<!-- Tables showing Fields and Images, and their add/delete buttons -->
			<div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
				<!--
					Title, list of fields, and open to add more Fields.
				-->
				<h3>Fields</h3>
				<p>Current Field:<p>
				<!-- Start the table for Fields -->
				<table class="table table-striped">
					<tr>
						<th>Field Name</th>
						<th>Field Type</th>
						<th></th>
					</tr>
					<!-- For each field added so far -->
					{{for field in project.customFields():}}
					<tr>
						<!-- Show the field title -->
						<td>{{=field.ProjectField.label}}</td>
						
						<!-- Show the field type -->
						<td>{{=field.TranscriptionFieldType.friendlyName}}</td>
						
						<!-- Show a delete button to delete the field -->
						<td class="table-button-column"><a class="btn btn-primary" href="{{=URL('project', 'deleteField', args=[project.id, field.ProjectField.id])}}">Delete</a></td>
					</tr>
					{{pass}}
				</table>
				<!-- After the the table, show a button to add Fields.-->
				<a class="btn btn-primary" href="{{=URL('project', 'addField', args=project.id)}}">Add Field</a>

				<!--
					Table showing images added, their delete buttons, and open to upload
					more images
				-->
				<h3>Images</h3>
				<p>Current Images:<p>
				<!-- Start the table for Images -->
>>>>>>> 005ff652156e5626eb19f71d6b6fbcacd70cf1a3
				<table class="table table-striped">
					<tr>
						<th>Image</th>
						<th>Description</th>
						<th></th>
					</tr>
					<!-- For each image added so far: -->
					{{for image in project.images():}}
					<tr>
						<!-- Show the image -->
						<td class="table-image-column"><img class="table-image-view" src="{{=URL('project','img',args=image.image)}}"/></td>
						
						<!-- Show the iamge description -->
						<td>{{=image.imageDescription}}</td>
						
						<!-- Show a button to delete the image -->
						<td class="table-button-column"><a class="btn btn-primary" href="{{=URL('project', 'deleteImage', args=[project.id, image.id])}}">Delete</a></td>
					</tr>
					{{pass}}
				</table>
<<<<<<< HEAD
                {{else:}}
                <p>This project has no records.</p>
                {{pass}}
				<a class="btn btn-primary" href="{{=URL('project', 'addImage', args=project.id)}}">Upload Image</a>
                    </div>
			</div>

=======
				<!-- After the the table, show a button to add Images.-->
				<a class="btn btn-primary" href="{{=URL('project', 'addImage', args=project.id)}}">Add Image</a>
			</div>
			
			<!-- Show a sidebar with instrucitons on adding fields and images -->
>>>>>>> 005ff652156e5626eb19f71d6b6fbcacd70cf1a3
			<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
                <div><span class="step">1</span>Create Collection</div>
                <div><span class="step active_step">2</span>Add Fields and Records</div>
                <div><span class="step">3</span>Open To Public</div>
                <div class="instructions">
                    <h3>Instructions</h3>
                    <p>Add fields to represent the information that you would like to be
                    transcribed.  Add a field for each distinct block of information, for
                    example, the title of a document, the author or the main contents. Click
                    add field to add a parameter of data to be collected. Fields can also be
                    deleted if added incorrectly.</p>
                    <p>TODO: FILL THIS IN!!</p>
                </div>
			</div>
		</div>

		<!--
			Show a large central button for creating the project, now that images
			and fields have been added. 
		-->
		<p class="center">
		<!-- First check if can create a button. If can, proceed -->
		{{if canClickCreate:}}
	    	<a class="btn btn-primary btn-lg" href="{{=URL('default', 'dashboard', args=project.id)}}">Create Project</a>
	    <!-- Else, add the disabled class and show an feedforward message explaining the reason -->
	    {{else:}}
		    <a class="btn btn-primary btn-lg disabled" href="{{=URL('default', 'dashboard', args=project.id)}}">Create Project</a>
		    <br /><i>{{=canClickCreateMessage}}</i>
	    {{pass}}
	    </p>
	</div>