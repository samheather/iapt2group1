<!--
	This is a Subview used to list open projects on the website. Examples of use include
	the home page and the search page. It saves repeating the below code.
-->

<!-- If no reference set, set it to blank -->
{{if not ("ref" in locals()): ref=""}}

        {{idx=0}}
<!-- Create a divider which contains the list of projects -->
{{for idx, project in enumerate(projects):}}
    <!-- Break to a new row every five projects -->
    {{if (idx or 0)%5 == 0:}}
        <ul class="projects">
    {{pass}}
        <li class="cell">
           <div class="project-tile">
               <!-- Upper row to contain the thumbnail -->
               <div class="row1">
               		<a href="{{=URL('project','view', args=project.id, vars=dict(ref=ref))}}">
	                    <img src="{{=URL('default','download',args=project.image)}}" alt="Icon image for project: {{=project.title}}" />
	                </a>
               </div>
           </div>

            <!-- Second row to display the project title -->
            <div class="row2">
                <a class="title" href="{{=URL('project','view', args=project.id, vars=dict(ref=ref))}}"><h2>{{=project.title}}</h2></a>

            </div>
        </li>
    {{pass}}
    {{if idx%5 == 0:}}
        </ul>
    {{pass}}
